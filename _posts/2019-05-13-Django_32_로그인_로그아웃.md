---
layout: post
title:  "Django_32.(SNS 이미지 앱 만들기)로그인/로그아웃 구현"
comments: true
description: "Django_part32"
author: SeungHyeon Tak
date:   2019-05-13 23:25:54 +0700
categories: [Django]
tags: [Django]
keywords: "Django"
---
#### Django.32 웹 개발
<br>
<br>
*변경할 사항*
* `base.html`
load static -> load staticfiles 로 변경
<br>

* 정적 파일을 보관하고 묶어 놓을 때 쓰는 명령어

```
$ python manage.py collectstatic
```

* * 로그인 / 로그아웃 기능 구현
<br>
<br>
* `config/urls.py`

```python
urlpatterns = [
	...
    path('accounts/', include('django.contrib.auth.urls')),
]
```

* models을 해야하는데 장고는 인증기능을 다 가지고 있어서 현재는 딱히 건드릴 필요 없다.

* template 수정
`base.html` 부분에서 login 부분을 수정해야한다.

![1](https://user-images.githubusercontent.com/46446165/57637362-33976b00-75e6-11e9-9825-8923df5653ab.png)

조건문이 있는데 로그인 할 경우를 따지는 조건문이다 if를 타면 로그인이 되어서 logout이 나타나고
else를 타면 로그인 실패여서 다시 login 부분이 나오게 된다.
<br>
* shell로 아이디 만들기
```
# shell 로 들어가서
form django.contrib.auth.models import User
user = User.objects.create_user('admin','admin@abc.org','admin1234');
user # 이걸로 확인
```

<br>
* 이후 admin 페이지로 가서 잘 가입 되었는지 확인

<br>
<br>
* `login` 템플릿 만들기 -- templates/registraion/login.html을 생성해준다.
![11](https://user-images.githubusercontent.com/46446165/57637690-026b6a80-75e7-11e9-884b-d075ee751285.png)

사용자가 로그인에 성공했을때는 사용자 정보를 보여주고(다음 페이지)
그렇지 않을 경우에는 로그인 폼이 보인다.(error 페이지)
<br>
<br>
* 여기서 로그인 성공하게 되면 profile 페이지로 가는데 지금은 `settings.py`로 가서 제일 밑에
`LOGIN_REDIRECT_URL = 'insta'` 를 추가 해주면 된다.
<br>
<br>
* 로그아웃
로그아웃 템플릿을 만든다. `templates/registration/logged_out.html`을 생성해준다.
![12](https://user-images.githubusercontent.com/46446165/57637942-a6551600-75e7-11e9-98fb-bdc950bbb315.png)
<br>

이제 로그인 로그아웃이 잘 되는걸 확인 할 수 있다.

