---
layout: post
title:  "Django_기본인증_01_프로젝트 구성"
comments: true
description: "Django"
author: SeungHyeon Tak
date:   2019-06-08 22:41:20 +0700
categories: [Django]
tags: [Django]
keywords: "Django"
---
#### Django.로그인 인증 프로젝트 구성


#### 장고 기본 프로젝트 구성

* 간단하게 정리하면서 Blog 구성해보기

기본적으로 장고 설치 및 프로젝트 / 앱 설치는 스킵

* App 설치 후 installed_apps에 추가

```python
# settings.py

INSTALLED_APPS = [
	'blog',
	...(생략)
]
```

<br>

```python
# config/urls.py

urlpatterns=[
	path('',include('blog.urls')),
]
```

* app을 프로젝트 urls.py에 연결 해주고 app 폴더에 urls.py를 생성하자
<br>

```python
# models.py

class Post(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)

    def __str__(self):
        return self.title

# 기본적인 내용을 추가한다.
```

<br>

* admin.py에서 관리자 페이지에서 보기 쉽게 설정하기

```python
# admin.py

from .models import Post

# 장식자 방식으로 admin 적용 
@admin.register(Post)
class PostAdmin(admin.ModelAdmin):
    list_display = ['id','title','created','updated']
    list_display_links = ['title']
    search_fields = ['title']
```

<br>
* 함수형 뷰(FBV)

```python
# views.py

from django.shortcuts import render, get_object_or_404
from .models import Post

def postlist(request):
    post_list = Post.objects.all() # queryset - all()은 전체 선택
    return render(request, 'blog/post_list.html', {'post_list':post_list})

def postdetail(request,pk):
    post_detail = get_object_or_404(Post, pk=pk)
    return render(request, 'blog/post_detail.html', {'post_detail':post_detail})

# get_object_or_404를 쓰는 이유 따로 try-except 블록으로 예외 처리할 필요가 없기때문에
# get_object_or_404(model_class, 검색조건(pk=pk or pk=detail_id))
```

<br>

```python
# app/urls.py

from django.urls import path
from . import views

#namespace 적용하기 (다른 앱이랑 path name 안겹치게 하려고)
app_name = 'blog'

urlpatterns = [
    path('',views.postlist, name='postlist'),
    path('detail/<int:pk>/',views.postdetail, name='postdetail'),
]

```

* 클래스형 뷰(CBV)

```python
# views.py

from .models import Post
from django.views.generic import ListView, DetailView

class PostList(ListView):
    model = Post
    template_name = 'blog/post_list.html'

# template_name - 해당 클래스가 사용할 template경로


class PostDetail(DetailView):
    model = Post
    template_name = 'blog/post_detail.html'
```

<br>

```python
# app/urls.py

from django.urls import path
from .views import PostList, PostDetail

#namespace 적용하기
app_name = 'blog'

urlpatterns = [
    path('',PostList.as_view(), name='postlist'),
    path('detail/<int:pk>/',PostDetail.as_view(), name='postdetail'),
]

```

<br>

* 최상위 template 만들기
  * Django 최상위 디렉토리에 layout폴더 만들고 base.html 파일만들기
![1123123](https://user-images.githubusercontent.com/46446165/59148015-a527d500-8a3d-11e9-9c3a-b70141800ad9.png)

* Template 생성
  * App 디렉토리에 Templates/App_name/...html 생성하기

* `post_list.html`
![123123441](https://user-images.githubusercontent.com/46446165/59148026-eb7d3400-8a3d-11e9-892e-8e3ff9b8c9c3.png)
<br>

* `post_detail.html`
![12312412](https://user-images.githubusercontent.com/46446165/59148033-0485e500-8a3e-11e9-851c-ab10a43788d5.png)
<br>

* admin 페이지에서 Post추가하고 확인하기


