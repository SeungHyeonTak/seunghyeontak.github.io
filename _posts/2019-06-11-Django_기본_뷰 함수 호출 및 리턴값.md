---
layout: post
title:  "Django_기본.HttpRequest/HttpResponse"
comments: true
description: "Django"
author: SeungHyeon Tak
date:   2019-06-11 22:10:27 +0700
categories: [Django]
tags: [Django]
keywords: "Django"
---
#### Django.기본 웹 개발

* 뷰 함수 호출시 인자와 리턴값(HttpRequest/HttpResponse)
  * 클라이언트부터의 모든 요청 내용을 담고 있으며, 매 요청 시마다 뷰 함수의 첫번째 인자로 전달

#### HttpRequest
- HttpRequest objects에서 폼처리 관련 속성들
 - request.method : 요청의 종류, 무조건 GET / POST (소문자로 해도 대문자로 인식이 되어 상관없음)
 - request.GET : GET 인자 QueryDict 타입
 - request.POST : POST 인자 QueryDict 타입
 - request.FILES : POST 업로드 파일 인자, MultiValueDict 타입

* MultiValueDict??
get인자로..
ex) http://localhost:8000/post/?name=Jhon&name=steve&name=Tim
이런 형식이면 마지막에 하나만 남는다. 보여질때는 하나만 보여진다는 뜻, 하지만 웹에서는 동일 key의 다수 value를 지원한다.
그것이 MultiValueDict이다.

* QueryDit??
MultiValueDict을 상속 받고 추가로 수정 불가능한 MultiValueDict(버그 방지)

```
# MultiValueDict shell로 쓰기

from django.utils.datastructures import MultiValueDict
d = MultiValueDict({'name':['Jone','steve','Tim'],'hi':['SeungHyeon']})
d = ['name']
d
>>> Tim  # 이 처럼 보여지는건 마지막 부분만 보여진다.(하지만 마지막만 보인다고 마지막만 인식되는건 아니다)
d.getlist('name')
>>> ['Jone','steve','Tim']  # getlist라는걸 쓰면 다 볼 수 있다.
d.getlist('aaaa')
>>> []   # 물론 Key값을 쓰면 안나온다.
d['name'] = 'abcd','efgh'
d
>>> MultiValueDict({'name':['abcd','efgh']}) # 이처럼 값을 변경 시켜 줄 수 있다.

# QueryDict shell로 쓰기

from django.http import QueryDict
qd = QueryDict('name=Jhon&name=steve&hi=abcd', encoding='utf8')
qd['name']
>>> 'steve'
qd.getlist('name')
>>> ['Jhon',steve]   # QueryDict또한 getlist로 보여지는것이 가능함 
qd['name']='aaaaaaa' # 이렇게 진행 하면 수정할수 없다고 뜬다(에러발생 로그)
...
```

* 다시한번 되짚으면 (알아두기)
* QueryDict
  - request.GET / POST : QueryDict 타입이라 수정 불가능

* MultiValueDict
  -  request.FILES : MultiValueDict 타입이라 수정 가능

#### HttpResponse
* 뷰 함수의 리턴값으로 HttpResponse의 인스턴스를 쓸수 있다.

쉽게 말해서 우리가 html파일을 불러올때
HttpResponse('''
<html>
...
</html>
''')

이런식으로 조합하는데

* render

```python
# render 쓰는법 

def post_list(request):
    qs = Post.object.all()
    return render(request, 'blog/post_list.html',{'post_list':qs})
```

redirect는 어느 주소로 갈 수 있게 도와주는 역할을 한다.
원래 주소가 아닌 다른주소로 갈 수 있게 도와준다고 생각하면 될것같다.
