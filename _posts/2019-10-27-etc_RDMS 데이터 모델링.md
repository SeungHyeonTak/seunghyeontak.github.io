---
layout: post
title:  "(etc). 관계형 데이터베이스 모델링 하는법"
comments: true
description: "RDBMS, JOIN, 개념적 데이터 모델링, RDB"
author: SeungHyeon Tak
date:   2019-10-27 20:08:20 +0700
categories: [etc]
tags: [etc]
keywords: "RDBMS"
---
#### etc. RDB 모델링 하는법
<br>
> 생활코딩 강좌를 참고하여 정리하였습니다. <br>
<br>
(생활코딩 관계형 데이터 모델링 하기)[https://opentutorials.org/course/3883] <br>
<br>

*****

#### 관계형 데이터 모델링
> RDB는 관계형 데이터 모델에 기초를 둔 데이터베이스이다. <br>
> 관계형 데이타 모델이란 데이타를 구성하는데 필요한 방법 중 하나로 모든 데이타를 2차원의 테이블 형태로 표현해준다. <br>
> 관계형 데이타 모델의 개념은 표현 개체의 외부개념 관례를 적용한 것으로, 데이타 간의 상관관계에서 개체간의 관계를 표현한 것이라고 할 수 있다. <br>

* RDBMS(Relational Database Management System)
> RDBMS는 관계형 데이터베이스를 생성하고 수정하고 관리할 수 있는 소프트웨어라고 정의할 수 있다. <br>

> 특징 <br>
>> * 모든 데이터를 2차원 테이블로 표현<br>
>> * 테이블은 row(tuple)과 column(field, item)으로 이루어진 기본 데이터 저장 단위<br>
>> * 상호관련성을 가진 테이블의 집합<br>
>> * 만들거나 이용하기도 비교적 쉽지만, 무엇보다도 확장이 용이하다는 장점을 가짐<br>
>> * 데이터베이스의 설계도를 ER모델 할 수 있음<br>
>> * ER모델에 따라 데이터베이스가 만들어지며, 데이터베이스는 하나 이상의 테이블로 구성된다. ER모델에서 Entity를 기반으로 테이블이 만들어짐<br>
>> * JOIN이 없다면 RDBMS가 아니다. <br>

#### 모델링 할때 생각하기
> 데이터 모델링은 문제를 현실로부터 뜯어내서 고도의 추상화과정을 거쳐 컴퓨터라는 새로운 현실로 옮겨 담는것 <br>
> 두개의 세계는 서로 다르기때문에 해결하려고 했던 문제가 데이터 베이스 표에 잘 담겼는지 끊임없이 계속해서 하나가 되야한다. <br>

*****

#### 데이터 모델링 하기(모델링 하는 순서 정리)
<br>
##### 전체 흐름

> 업무 파악<br>
* 그 일이 무엇인지 파악(하나하나 이해하고 거기에 대해서 설명을 잘 할 줄 알아야 한다.)
* 나와 나에게 일을 의뢰한 사람과 의논해서 파악
* UI를 보며 의뢰한사람 or 혹은 같이 작업하는 사람과 충분히 고민해보기
* 해당 기능들을 충분히 불신해라(불신할수록 말의 신뢰성은 높아진다.)
* 내가 한말을 상대가 잘 이해했는지 크로스 체크 해보기
* 훨씬 더 서로의 생각을 동기화하고 확인할 수 있음

```text
  -정보를 입력하는 UI가 원인이 되어서 DB의 데이터를 변경하는 결과->
UI								DB
    <-데이터라는 원인에 의해 UI의 내용이 표시되는 결과를 낳는다-
* 사용자가 마주하는 UI의 내용이 표시되는 결과를 낳는다.
* 서로 원인과 결과가 될 수 있다.
* 원인과 결과를 번갈아가며 순차적으로 점검하지 않는다면 좋은 모델링이 나오지않는다.
```

<br>

> 개념적 데이터 모델링(개념충분히 이해한 상태에서 작업하기) - ERD 작업하기 <br>
* 파악한 업무에서 개념을 뽑아내는 작업
  * 현실에서 개념을 추출하는 필터
  * 개념에 대해서 사람들과 대화해보기
* ERD는 3개의 관점으로 바라볼 수 있는 파인더를 제공 - ERD(다른 사람도 알아볼 수 있게 표현하는 도구)
  * 정보 - 다른 사람들에게 표현 할 수 있게 도와줌
  * 그룹 - 서로 연관된 정보를 그룹핑해서 인식하고 이것을 다른 사람들에게 표현 할 수있게 해줌
  * 관계 - 정보-그룹 사이의 관계를 인식하고 다른 사람들에게 표현 할 수있게 해줌

* 기획서에서 Entity찾기
  * 기획서에는 여러가지 정보들이 흩어져 있다.
  * 정답은 따로 없다.
  * 데이터베이스에 잘어울리는 모델이 유리함
  * 주제에 따라 Table을 분리하기
  * DB모델링 할때 평면적인 관계로 개념을 뽑아 내는것이 RDBMS에 어울리는 방식
     * 예를 들어 글이라는 Entity는 실제 데이터가 아니다.
     * 구체적인 데이터는 제목, 생성인, 본문 이라고 할 수 있다.
     * 이렇게 구체적인 데이터들은 Attribute(속성)이라고 부른다.

```text
- 글
 - 본문
 - 제목
 - 생성일

여기서 의구심이 드는 부분이 있을 수 있다.
Q.) 여기서 왜 저자는 속성으로 안들어 갈까?
A1.) 만약 저자의 이름만 현재시스템에 필요하다면 저자는 속성이 되면된다.
A2.) 하지만 저자에 대한 여러정보들이 필요하다면 소개 / 정보 /... 등등 들이 포함되는 Entity가 된다.

* Entiy -> table
* Attribute -> Column
* Relation -> PK, FK
* Tuple -> Row
```

  * `주의`
     * RDB는 내포관계를 허용안함
     * 거대 단일 테이블로 ㅍ현하면 중복이 발생
<br>

```text
table
 - 표를 나누어서 모델링 하면 좋은점
   - 예를 들어 글에 대한 정보만 필요하다면 글을 담고 있는 표만을 조회하는걸 통해서 컴퓨터의 자원을 아낄 수 있다.
 - JOIN
   - 이 글은 저자 누가 작성했는가 / 저자에 대한 소개를 나타낼때 JOIN으로 합성 할 수 있다.
```

<br> 

* Entity에 해당하는 속성찾기
* Identifier(식별자) 지정
  * Pirmary Key - PK
  * Foreign Key - FK
* Entity간의 연결

<br>

> 논리적 데이터 모델링 <br>
* 개념적으로 이해한걸 표로 나타냄

<br>

> 물리적 데이터 모델링
* 직접 SQL코드로 옮겨담는것

<br>

*****

#### 관계
<br>
> 각각의 Entity들이 데이터로서 연결되어있는것 (연관성을 표현해준것을 Relation 즉, 관계라 표현함) <br>
> 논리적 데이터 모델에서 PK, FK, JOIN을 통해 연결됨 <br>
>> * 행을 식별하는 유일무이 식별자를 PK이라한다. <br>
>> * 외래키(Foreing Key)를 실제로 연결됨 <br>
<br>

*****

##### Relationship에서 꼭 따져봐야 하는것 (*까다로움*)
<br>
> Cardinality <br>
> Optionality <br>

* Cardinality를 따져보려면 양쪽을 다 따져봐야한다.

* 1:1관계
  * 각 담임은 한 번만 관리 가능
  * 각 반의 담임은 한명이다.
  * 1:1관계에서 어느쪽을 PK, FK로 나누기 쉽지 않다.
     * 부모 / 자식 테이블으로 생각
     * 의존안해도 되는 테이블 PK / 의존해야하는 테이블 FK 로 나누면 된다.

* 1:N관계
  * 저자는 여러글을 작성한다.
  * 각 댓글은 하나의 저자만 존재한다.

* N:M관계
  * 저자 - 글 관계(하나의 글을 여러명이 편집 가능 하다고 생각할때)
  * 저자는 여러글을 작성한다.
  * 각 글은 여러 저자가 존재한다.
  * 어느쪽 한테이블에 컬럼을 추가하기 애매하다.
     * mapping table을 만들어주기
     * 여기에 FK 지정해주자!

* Optionality
  * 저자는 댓글을 작성하지 않을 수도 있다. (1:0~n 관계 설정)
  * 각 댓글은 반드시 저자가 있다. (1:0~n 관계 설정)

*****

#### 논리적 데이터 모델링

> 제일 먼저 작성하기 좋은 Table <br>

* FK가 없는 Table
* Physical Name -> Table의 실제 이름
* Logical Name -> Physical Name의 도움말(안내정도?) 한글로 테이블 이름 설명
* Auto_INCREMENT -> 행이 추가될때 마다 자동으로 1씩 추가된다.
* PK type값은 int형이다.

* Relationship을 설정할때 가장 중요하게 생각해야할것!
  * Carbinality이다.


